spack:
  view: false
  concretization: together
  config::
    concretizer:: original
    install_tree:
#      root: /lfs/software/opt
      root: /home/frank/software/opt
      padded_length: 128
    build_stage: $tempdir/user/spack-stage

  modules::
    default:
#      module_roots:
#        tcl: /cm/shared/software/modules
#      tcl:
      lmod:
        blacklist_implicits: true
        hash_length: 0
        all:
          conflict:
          - '{name}'
          environment:
            set:
              '{name}_ROOT': '{prefix}'
#        projections:
#          all: '{name}/{version}-{compiler.name}-{compiler.version}'

  # Override all other settings so this is the only compiler visible to spack
  compilers::
  - compiler:
      paths:
        cc: /bin/gcc
        cxx: /bin/g++
        f77: /bin/gfortran
        fc: /bin/gfortran
      operating_system: rocky8
      target: x86_64
      modules: []
      environment: {}
      extra_rpaths: []
      flags: {}
      spec: gcc@8.5.0

  specs:
  - gcc@12.1.0%gcc target=x86_64
  - intel-oneapi-compilers%gcc target=x86_64

